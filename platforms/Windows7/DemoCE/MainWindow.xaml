<Window x:Class="DemoCE.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
				xmlns:controls="clr-namespace:DemoCE.Controls"
				xmlns:src="clr-namespace:DemoCE"
				xmlns:converter="clr-namespace:DemoCE.Converters"
				x:Name="mainW" Title="Arm Consumed Endurance (CE)"
				SizeToContent="WidthAndHeight" ResizeMode="NoResize"
				controls:TimelineControl.DeleteFatigueInfo="DeleteFatigueInfo"
				controls:TimelineControl.ReplayFatigue="ReplayFatigue"
				Loaded="Window_Loaded" Closing="Window_Closing">
	
	<Window.Resources>
		<converter:NegateBooleanConverter x:Key="nbConverter"/>
		<converter:BooleanGenderConverter x:Key="bgConverter"/>
		<converter:DoubleFormatConverter x:Key="DFConverter" />
	</Window.Resources>
	
	<DockPanel>
		
		<Grid x:Name="gImage" DockPanel.Dock="Left" Width="640" Height="480">
			<Image Name="iKinectCapture"/>
			<Image Name="iSkeleton" VerticalAlignment="Top"/>
			<Button>
				<Button.Template>
					<ControlTemplate TargetType="Button">
						<Grid>
							<Image />
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Grid>
					</ControlTemplate>
				</Button.Template>
			</Button>
		</Grid>
		
		<DockPanel DockPanel.Dock="Right" Width="320">
			<StackPanel x:Name="spControl" DockPanel.Dock="Bottom" Background="White" Margin="5">
				<StackPanel Name="spAutoStart" Orientation="Horizontal" Height="30">
					<CheckBox Margin="10,0,0,0" VerticalAlignment="Bottom" FontSize="13" >
						<CheckBox.LayoutTransform>
							<ScaleTransform ScaleX="1.5" ScaleY="1.5" />
						</CheckBox.LayoutTransform>
						Auto Start/Stop
					</CheckBox>
				</StackPanel>
				<StackPanel>
					<StackPanel Orientation="Horizontal">
						<Button Name="btStartMeasure" Content="Start" Width="90" Click="BtStartMeasure_Click"
										IsEnabled="{Binding ElementName=mainW, Path=IsEngineRunning, Converter={StaticResource ResourceKey=nbConverter}}" />
						<Button Name="btStopMeasure" Content="Stop" Width="90" Margin="10,0,0,0" Click="BtStopMeasure_Click" 
										IsEnabled="{Binding ElementName=mainW, Path=IsEngineRunning}"/>
						<Button Name="btExport" Content="Export" Width="90" Margin="10,0,0,0" Click="BtExport_Click"
										IsEnabled="{Binding ElementName=mainW, Path=IsEngineRunning, Converter={StaticResource ResourceKey=nbConverter}}" />
					</StackPanel>
				</StackPanel>
			</StackPanel>
			
			<ListBox x:Name="lbTimeLines" VerticalAlignment="Stretch" DockPanel.Dock="Top" 
							 ScrollViewer.VerticalScrollBarVisibility="Visible"
							 ScrollViewer.HorizontalScrollBarVisibility="Hidden"
							 ItemsSource="{Binding ElementName=mainW, Path=FatigueInfoCollection}">
				<ListBox.ItemTemplate>
					<DataTemplate>
						<controls:TimelineControl Margin="0,0,0,5" Width="300" Height="150"
																			LenghtInSeconds="60" MaxValue="100"
																			LeftArmCE="{Binding Path=LeftArmConsumedEndurance}"
																			RightArmCE="{Binding Path=RightArmConsumedEndurance}"
																			TotalTimeInSeconds="{Binding Path=TotalTimeInSeconds}"
																			IsEngineRunning="{Binding ElementName=mainW, Path=IsEngineRunning}"/>
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
			
		</DockPanel>
	</DockPanel>
</Window>