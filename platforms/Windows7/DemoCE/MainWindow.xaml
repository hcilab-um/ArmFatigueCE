<Window x:Class="DemoCE.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
				xmlns:controls="clr-namespace:DemoCE.Controls"
				xmlns:converter="clr-namespace:DemoCE.Converters"
				x:Name="mainW" Title="Arm Consumed Endurance (CE)"
				SizeToContent="WidthAndHeight" ResizeMode="NoResize"
				controls:TimelineControl.DeleteFatigueInfo="DeleteFatigueInfo"
				controls:TimelineControl.ReplayFatigue="ReplayFatigue"
				Loaded="Window_Loaded" Closing="Window_Closing">
	<Window.Resources>
		<converter:NegateBooleanConverter x:Key="nbConverter"/>
		<converter:BooleanGenderConverter x:Key="bgConverter"/>
		<converter:DoubleFormatConverter x:Key="DFConverter" />
	</Window.Resources>
	<DockPanel>
		<DockPanel DockPanel.Dock="Right" LastChildFill="True">
			<ListBox x:Name="lbTimeLines" Height="530" Width="440" DockPanel.Dock="Top" ScrollViewer.VerticalScrollBarVisibility="Visible" SelectedItem="{Binding ElementName=mainW, Path=CurrentFatigueInfo}"
																										ItemsSource="{Binding ElementName=mainW, Path=FatigueInfoCollection}">
				<ListBox.ItemTemplate>
					<DataTemplate>
						<controls:TimelineControl Margin="0,0,0,5" Width="410" Height="200" LenghtInSeconds="60" MaxValue="200"
															LeftArmCE="{Binding Path=LeftArmConsumedEndurance}" RightArmCE="{Binding Path=RightArmConsumedEndurance}"
															TotalTimeInSeconds="{Binding Path=TotalTimeInSeconds}" IsEngineRunning="{Binding ElementName=mainW, Path=IsEngineRunning}"/>
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
		</DockPanel>
		<Grid x:Name="gImage" DockPanel.Dock="Top" Width="640" Height="480">
			<Image Name="iKinectCapture"/>
			<Image Name="iSkeleton" VerticalAlignment="Top"/>
		</Grid>
		<StackPanel x:Name="spControl" DockPanel.Dock="Bottom" Background="White" >
			<StackPanel Name="spGender" Orientation="Horizontal" Margin="0,0,0,5">
				<Label Width="200" Content="Gender:"/>
				<ComboBox x:Name="cbGender" Text="Gender" Width="430" Margin="10,0,0,0" IsEnabled="{Binding ElementName=mainW, Path=IsEngineRunning, Converter={StaticResource ResourceKey=nbConverter}}">
					<ComboBoxItem Content="Male" IsSelected="{Binding ElementName=mainW, Path=CurrentFatigueInfo.Gender, Converter={StaticResource ResourceKey=bgConverter}, ConverterParameter=Male}"/>
					<ComboBoxItem Content="Female" IsSelected="{Binding ElementName=mainW, Path=CurrentFatigueInfo.Gender, Converter={StaticResource ResourceKey=bgConverter}, ConverterParameter=Female}"/>
				</ComboBox>
			</StackPanel>
			<StackPanel>
				<StackPanel Orientation="Horizontal">
					<Label Width="200" Content="Fatigue Measure:"/>
					<Button Name="btStartMeasure" Content="Start" Width="210" Margin="10,0,0,0" Click="BtStartMeasure_Click"
									IsEnabled="{Binding ElementName=mainW, Path=IsEngineRunning, Converter={StaticResource ResourceKey=nbConverter}}" />
					<Button Name="btStopMeasure" Content="Stop" Width="210" Margin="10,0,0,0" Click="BtStopMeasure_Click" 
									IsEnabled="{Binding ElementName=mainW, Path=IsEngineRunning}"/>
				</StackPanel>
			</StackPanel>
		</StackPanel>
	</DockPanel>
</Window>